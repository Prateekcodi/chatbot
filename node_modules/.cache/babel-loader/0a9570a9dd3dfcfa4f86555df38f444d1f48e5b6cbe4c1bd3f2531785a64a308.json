{"ast":null,"code":"import React,{useEffect}from'react';import{HashRouter,Routes,Route,Navigate,Link}from'react-router-dom';import ChatBot from'./components/ChatBot';import MultiAI from'./components/MultiAI';import AuthPage from'./components/auth/AuthPage';import{AuthProvider,useAuth}from'./lib/auth';import{supabase}from'./lib/supabaseClient';import'./index.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function Protected(_ref){let{children}=_ref;const{session}=useAuth();if(!session)return/*#__PURE__*/_jsx(Navigate,{to:\"/auth\",replace:true});return/*#__PURE__*/_jsx(_Fragment,{children:children});}function Nav(){const{session,signOut}=useAuth();return/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-4 left-1/2 transform -translate-x-1/2 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/10 backdrop-blur-md rounded-2xl p-2 border border-white/20 shadow-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/multiai\",className:\"px-4 py-2 rounded-xl font-medium transition-all duration-200 text-purple-100 hover:text-white hover:bg-white/10\",children:\"Multi-AI Tool\"}),/*#__PURE__*/_jsx(Link,{to:\"/chatbot\",className:\"px-4 py-2 rounded-xl font-medium transition-all duration-200 text-purple-100 hover:text-white hover:bg-white/10\",children:\"Chatbot\"}),session?/*#__PURE__*/_jsx(\"button\",{onClick:signOut,className:\"ml-2 px-3 py-2 rounded-xl bg-white/10 text-white hover:bg-white/20\",children:\"Logout\"}):/*#__PURE__*/_jsx(Link,{to:\"/auth\",className:\"ml-2 px-3 py-2 rounded-xl bg-white/10 text-white hover:bg-white/20\",children:\"Login\"})]})})});}function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(HashRouter,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App w-screen h-screen overflow-auto-y\",children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full\",children:[/*#__PURE__*/_jsx(ProfileUpsertOnAuth,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/auth\",element:/*#__PURE__*/_jsx(AuthPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/chatbot\",element:/*#__PURE__*/_jsx(Protected,{children:/*#__PURE__*/_jsx(ChatBot,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/multiai\",element:/*#__PURE__*/_jsx(Protected,{children:/*#__PURE__*/_jsx(MultiAI,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/multiai\",replace:true})})]})]})]})})});}function ProfileUpsertOnAuth(){useEffect(()=>{let mounted=true;const{data:sub}=supabase.auth.onAuthStateChange(async(event,session)=>{if(!mounted)return;if(event==='SIGNED_IN'&&session!==null&&session!==void 0&&session.user){var _session$user$user_me;await supabase.from('profiles').upsert({id:session.user.id,email:session.user.email||null,full_name:((_session$user$user_me=session.user.user_metadata)===null||_session$user$user_me===void 0?void 0:_session$user$user_me.full_name)||null},{onConflict:'id'});}});return()=>{mounted=false;sub.subscription.unsubscribe();};},[]);return null;}export default App;","map":{"version":3,"names":["React","useEffect","HashRouter","Routes","Route","Navigate","Link","ChatBot","MultiAI","AuthPage","AuthProvider","useAuth","supabase","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Protected","_ref","children","session","to","replace","Nav","signOut","className","onClick","App","ProfileUpsertOnAuth","path","element","mounted","data","sub","auth","onAuthStateChange","event","user","_session$user$user_me","from","upsert","id","email","full_name","user_metadata","onConflict","subscription","unsubscribe"],"sources":["/workspace/src/App.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { HashRouter, Routes, Route, Navigate, Link } from 'react-router-dom';\nimport ChatBot from './components/ChatBot';\nimport MultiAI from './components/MultiAI';\nimport AuthPage from './components/auth/AuthPage';\nimport { AuthProvider, useAuth } from './lib/auth';\nimport { supabase } from './lib/supabaseClient';\nimport './index.css';\n\nfunction Protected({ children }: { children: React.ReactNode }) {\n  const { session } = useAuth();\n  if (!session) return <Navigate to=\"/auth\" replace />;\n  return <>{children}</>;\n}\n\nfunction Nav() {\n  const { session, signOut } = useAuth();\n  return (\n    <div className=\"fixed top-4 left-1/2 transform -translate-x-1/2 z-50\">\n      <div className=\"bg-white/10 backdrop-blur-md rounded-2xl p-2 border border-white/20 shadow-lg\">\n        <div className=\"flex space-x-2 items-center\">\n          <Link to=\"/multiai\" className=\"px-4 py-2 rounded-xl font-medium transition-all duration-200 text-purple-100 hover:text-white hover:bg-white/10\">Multi-AI Tool</Link>\n          <Link to=\"/chatbot\" className=\"px-4 py-2 rounded-xl font-medium transition-all duration-200 text-purple-100 hover:text-white hover:bg-white/10\">Chatbot</Link>\n          {session ? (\n            <button onClick={signOut} className=\"ml-2 px-3 py-2 rounded-xl bg-white/10 text-white hover:bg-white/20\">Logout</button>\n          ) : (\n            <Link to=\"/auth\" className=\"ml-2 px-3 py-2 rounded-xl bg-white/10 text-white hover:bg-white/20\">Login</Link>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <HashRouter>\n        <div className=\"App w-screen h-screen overflow-auto-y\">\n          <Nav />\n          <div className=\"w-full h-full\">\n            <ProfileUpsertOnAuth />\n            <Routes>\n              <Route path=\"/auth\" element={<AuthPage />} />\n              <Route path=\"/chatbot\" element={<Protected><ChatBot /></Protected>} />\n              <Route path=\"/multiai\" element={<Protected><MultiAI /></Protected>} />\n              <Route path=\"*\" element={<Navigate to=\"/multiai\" replace />} />\n            </Routes>\n          </div>\n        </div>\n      </HashRouter>\n    </AuthProvider>\n  );\n}\n\nfunction ProfileUpsertOnAuth() {\n  useEffect(() => {\n    let mounted = true;\n    const { data: sub } = supabase.auth.onAuthStateChange(async (event, session) => {\n      if (!mounted) return;\n      if (event === 'SIGNED_IN' && session?.user) {\n        await supabase.from('profiles').upsert({\n          id: session.user.id,\n          email: session.user.email || null,\n          full_name: (session.user.user_metadata as any)?.full_name || null,\n        }, { onConflict: 'id' });\n      }\n    });\n    return () => { mounted = false; sub.subscription.unsubscribe(); };\n  }, []);\n  return null;\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}